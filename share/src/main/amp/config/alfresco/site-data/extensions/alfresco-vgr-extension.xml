<extension>
  <modules>

    <module>
      <id>VGR Global</id>
      <auto-deploy>true</auto-deploy>

      <!-- Base evaluator that decides if any of the component bindings should be used at all -->
      <evaluator type="site.module.evaluator">
        <params>
          <sites>.*</sites>
          <sitePresets>site-dashboard</sitePresets>
          <applyForNonSites>true</applyForNonSites>
        </params>
      </evaluator>

      <!-- Apply the following customizations when the base evaluator above passes -->
      <customizations>
        <customization>
          <targetPackageRoot>org.alfresco</targetPackageRoot>
          <sourcePackageRoot>se.vgregion.alfresco.customizations</sourcePackageRoot>
        </customization>
      </customizations>

      <configurations>
        <config evaluator="string-compare" condition="DocumentLibrary" replace="true">
          <create-content>
            <content id="document" label="menu.create-content.vgr-document" type="pagelink" index="10" icon="text">
              <param name="page">create-content?destination={nodeRef}&amp;itemId=vgr:document</param>
            </content>
            <content id="folder" label="create-content.folder" icon="folder" index="5" type="javascript">
              <param name="function">onNewFolder</param>
            </content>
          </create-content>

          <create-content-by-template>false</create-content-by-template>
        </config>
      </configurations>

      <components>
        <!-- Hide Publishing area in document details -->
        <component>
          <scope>template</scope>
          <region-id>document-publishing</region-id>
          <source-id>document-details</source-id>
          <sub-components>
            <sub-component id="default">
              <evaluations>
                <evaluation id="vgr-hide">
                  <render>false</render>
                </evaluation>
              </evaluations>
            </sub-component>
          </sub-components>
        </component>

        <!-- Hide sync area in document details -->
        <component>
          <scope>template</scope>
          <region-id>document-sync</region-id>
          <source-id>document-details</source-id>
          <sub-components>
            <sub-component id="default">
              <evaluations>
                <evaluation id="vgr-hide">
                  <render>false</render>
                </evaluation>
              </evaluations>
            </sub-component>
          </sub-components>
        </component>

        <!-- Hide workflows area in document details -->
        <component>
          <scope>template</scope>
          <region-id>document-workflows</region-id>
          <source-id>document-details</source-id>
          <sub-components>
            <sub-component id="default">
              <evaluations>
                <evaluation id="vgr-hide">
                  <render>false</render>
                </evaluation>
              </evaluations>
            </sub-component>
          </sub-components>
        </component>

        <!-- Hide sync area in folder details -->
        <component>
          <scope>template</scope>
          <region-id>folder-sync</region-id>
          <source-id>folder-details</source-id>
          <sub-components>
            <sub-component id="default">
              <evaluations>
                <evaluation id="vgr-hide">
                  <render>false</render>
                </evaluation>
              </evaluations>
            </sub-component>
          </sub-components>
        </component>

        <component>
          <scope>template</scope>
          <region-id>people-finder</region-id>
          <source-id>invite</source-id>
          <sub-components>
            <sub-component id="default">
              <evaluations>
                <evaluation id="vgr-default">
                  <url>/components/people-finder/people-finder</url>
                  <properties>
                    <setFocus>true</setFocus>
                    <addButtonSuffix>&gt;&gt;</addButtonSuffix>
                    <dataWebScript>vgr/sites/[siteId]/potentialmembers?authorityType=USER</dataWebScript>
                  </properties>
                </evaluation>
              </evaluations>
            </sub-component>
          </sub-components>
        </component>

        <component>
          <scope>global</scope>
          <region-id>additional-content</region-id>
          <source-id>global</source-id>
          <sub-components>
            <sub-component id="vgr-file-upload">
              <evaluations>
                <evaluation id="vgr-file-upload">
                  <url>/components/upload/file-upload</url>
                </evaluation>
              </evaluations>
            </sub-component>
            <sub-component id="vgr-html-upload">
              <evaluations>
                <evaluation id="vgr-html-upload">
                  <url>/components/upload/html-upload</url>
                </evaluation>
              </evaluations>
            </sub-component>
            <sub-component id="vgr-flash-upload">
              <evaluations>
                <evaluation id="vgr-flash-upload">
                  <url>/components/upload/flash-upload</url>
                </evaluation>
              </evaluations>
            </sub-component>
            <!-- You can't pick content-type in Drag & Drop, so disable this one -->
            <sub-component id="vgr-dnd-upload">
              <evaluations>
                <evaluation id="vgr-dnd-upload">
                  <url>/components/upload/dnd-upload</url>
                </evaluation>
              </evaluations>
            </sub-component>
          </sub-components>
        </component>
        <!-- <component> <scope>template</scope> <region-id>dnd-upload</region-id> <source-id>documentlibrary</source-id> <sub-components> <sub-component id="default"> <evaluations> <evaluation id="vgr-hide"> <render>false</render> </evaluation> </evaluations> </sub-component> </sub-components> </component> -->
        <!-- General Share pages -->
        <component>
          <region-id>footer</region-id>
          <source-id>global</source-id>
          <scope>global</scope>
          <sub-components>
            <!-- The 'default' sub-component will have an index of 50 -->
            <sub-component id="piwik-footer" index="60">
              <url>/components/piwik-footer</url>
            </sub-component>
          </sub-components>
        </component>

        <!-- Login page -->
        <component>
          <region-id>components</region-id>
          <source-id>slingshot-login</source-id>
          <scope>page</scope>
          <sub-components>
            <!-- The 'default' sub-component will have an index of 50 -->
            <sub-component id="analytics-footer" index="60">
              <url>/components/piwik-footer</url>
            </sub-component>
          </sub-components>
        </component>

      </components>

    </module>

  </modules>
</extension>
